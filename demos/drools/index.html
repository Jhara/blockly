<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="target-densitydpi=device-dpi, height=660, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Blockly : Block Drools Generator</title>
  <script src="../../blockly_compressed.js"></script>
  <script src="../../blocks_compressed.js"></script>
  <script src="../../generators/drools.js"></script>
  <script src="../../generators/drools/logic.js"></script>
  <script src="../../generators/drools/math.js"></script>
  <script src="../../msg/js/en.js"></script>
  <script src="blocks.js"></script>
  <style>
    html, body {
      height: 100%;
    }
    body {
      background-color: #fff;
      font-family: sans-serif;
      margin: 0 5px;
      overflow: hidden
    }
    h1 {
      font-weight: normal;
      font-size: 140%;
    }
    h3 {
      margin-top: 5px;
      margin-bottom: 0;
    }
    a:hover {
      color: #f00;
    }
    table {
      height: 100%;
      width: 100%;
    }
    td {
      vertical-align: top;
      padding: 0;
    }
    #blockly {
      position: fixed;
    }
    #previewFrame {
      border-style: solid;
      border-color: #ddd;
      border-width: 0 1px 1px 0;
      position: absolute;
    }
    pre {
      margin-top: 0;
      position: absolute;
      border: #ddd 1px solid;
      overflow: scroll;
    }
  </style>

</head>
<body>
<button onClick="showCode()">Drools Generator</button>
  <div id="blocklyDiv" style="height: 480px; width: 1024px;"></div>
  <xml id="toolbox" style="display: none">
    <category name="Rule Base">
      <block type="rule_base"></block>
      <block type="print_RHS"></block>
    </category>
    <category name="Objects">
      <category name="Persona">
        <block type="fact"></block>
        <block type="fact_att_edad"></block>
        <block type="fact_att_sexo"></block>
      </category>
    </category>

    <category name="Drools">
      <category name="logic">
        <block type="logic_operation_drools"></block>
      </category>
    </category>
    <category name="Logic">
      <block type="logic_compare"></block>
      <block type="logic_operation"></block>
    </category>
    <category name="Math">
      <block type="math_number"></block>
    </category>
  </xml>

  <script>
    var workspace = Blockly.inject('blocklyDiv',
         {toolbox: document.getElementById('toolbox')});
    Blockly.Xml.domToWorkspace(workspace);

    function showCode() {
      var code = Blockly.Drools.workspaceToCode(workspace);
      alert(code);
    }
  </script>

</body>
</html>
